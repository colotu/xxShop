/*
* File:        maticsoft.jquery.js
* Author:      yaoyuan@ys56.com
* Copyright © 2004-2013 YSWL. All Rights Reserved.
*/function modFoat(e){var t=parseInt(e)+1;return t-e<1?t:e}function getIEVersion(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e}function loclkey(e){var t;window.event?t=e.keyCode:e.which&&(t=e.which);if(t==17)return!1;window.event.altKey&&(window.event.keyCode==37||window.event.keyCode==39)&&(event.returnValue=!1),event.ctrlKey&&event.keyCode==82&&(event.keyCode=0,event.returnValue=!1),event.keyCode==122&&(event.keyCode=0,event.returnValue=!1),event.ctrlKey&&event.keyCode==78&&(event.returnValue=!1),event.shiftKey&&event.keyCode==121&&(event.returnValue=!1),window.event.srcElement.tagName=="A"&&window.event.shiftKey&&(window.event.returnValue=!1);if(window.event.altKey&&window.event.keyCode==115)return window.showModelessDialog("about:blank","","dialogWidth:1px;dialogheight:1px"),!1}function CheckDate(INDate){if(INDate=="")return!0;subYY=INDate.substr(0,4);if(isNaN(subYY)||subYY<=0)return!0;if(INDate.indexOf("-",0)!=-1)separate="-";else{if(INDate.indexOf("/",0)==-1)return!0;separate="/"}area=INDate.indexOf(separate,0),subMM=INDate.substr(area+1,INDate.indexOf(separate,area+1)-(area+1));if(isNaN(subMM)||subMM<=0)return!0;subMM.length<2&&(subMM="0"+subMM),area=INDate.lastIndexOf(separate),subDD=INDate.substr(area+1,INDate.length-area-1);if(isNaN(subDD)||subDD<=0)return!0;eval(subDD)<10&&(subDD="0"+eval(subDD)),NewDate=subYY+"-"+subMM+"-"+subDD;if(NewDate.length!=10)return!0;if(NewDate.substr(4,1)!="-")return!0;if(NewDate.substr(7,1)!="-")return!0;var MM=NewDate.substr(5,2),DD=NewDate.substr(8,2);if(subYY%4==0&&subYY%100!=0||subYY%400==0){if(parseInt(MM)==2&&DD>29)return!0}else if(parseInt(MM)==2&&DD>28)return!0;var mm=new Array(1,3,5,7,8,10,12),flag=!1;for(i=0;i<mm.length;i++)parseInt(MM,10)==mm[i]&&(flag=!0);if(flag==1){if(parseInt(DD)>31)return!0}else if(parseInt(DD)>30)return!0;return parseInt(MM)>12?!0:!1}function guidGenerator(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}$.ajaxSetup({cache:!1}),String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return typeof e[n]!="undefined"?e[n]:t})},String.prototype.sub=function(e,t){var n=this.slice(0,e),r=n.replace(/[^x00-xff]/g,"**").length;if(r<=e)return n;var i=t?"…":"";r-=n.length;switch(r){case 0:return n;case e:return this.slice(0,e>>1)+i;default:var s=e-r,o=this.slice(s,e),u=o.replace(/[x00-xff]/g,"").length;return(u?this.slice(0,s)+o.sub(u):this.slice(0,s))+i}},typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),typeof String.prototype.endsWith!="function"&&(String.prototype.endsWith=function(e){return this.slice(-e.length)==e}),function(e){e.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return n!=null?decodeURIComponent(n[2]):null},function(t,n,r,i){e.setUrlParam=function(e,s,o){o||(o=window.location.href),s=s!=i?encodeURIComponent(s).replace(n,"+"):s;var u=new RegExp("([?&]"+e.replace(t,"\\$1")+"=)[^&]*");return u.test(o)?o.replace(u,function(e,t){return s!=i?t+s:""}).replace(r,"$1?"):s!=i?o+(o.indexOf("?")+1?"&":"?")+e+"="+s:o}}(/([\\\/\[\]{}().*+?|^$])/g,/%20/g,/^([^?]+)&/),e.PageName4NoEx=function(){var e=location.href,t=e.split("/"),n=t.slice(t.length-1,t.length).toString(String).split(".");return n.slice(0,1)},e.PageName=function(){var e=location.href,t=e.split("/"),n=t[t.length-1];return n},e.getUrlPart=function(e){var t="/"+location.href.split("?").slice(0,1).toString().split("/").slice(3,e+3).join("/");return t},e.getUrlMiddle=function(){var e=location.href,t=e.split("/"),n="";for(var r=t.length-1;r>2;r--)n="/"+t[r]+n;return n.split("?").slice(0,1).toString(String)},e.fn.sorted=function(t){var n={reversed:!1,by:function(e){return e.text()}};e.extend(n,t);var r=e(this),i=r.get();return i.sort(function(t,r){var i=n.by(e(t)),s=n.by(e(r));return n.reversed?i<s?1:i>s?-1:0:i<s?-1:i>s?1:0}),e(i)}}(jQuery),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)(new RegExp("("+n+")")).test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Date.prototype.toString=function(e,t){var n={};n.Year=this.getFullYear(),n.TYear=(""+n.Year).substr(2),n.Month=this.getMonth()+1,n.TMonth=n.Month<10?"0"+n.Month:n.Month,n.Day=this.getDate(),n.TDay=n.Day<10?"0"+n.Day:n.Day,n.Hour=this.getHours(),n.THour=n.Hour<10?"0"+n.Hour:n.Hour,n.hour=n.Hour<13?n.Hour:n.Hour-12,n.Thour=n.hour<10?"0"+n.hour:n.hour,n.Minute=this.getMinutes(),n.TMinute=n.Minute<10?"0"+n.Minute:n.Minute,n.Second=this.getSeconds(),n.TSecond=n.Second<10?"0"+n.Second:n.Second,n.Millisecond=this.getMilliseconds(),n.Week=this.getDay();var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],s=["Sun","Mon","Tue","Web","Thu","Fri","Sat"],o=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],u=n.Millisecond/1e3;return e!=undefined&&e.replace(/\s/g,"").length>0?(t!=undefined&&t=="en"&&(i=r.slice(0),o=s.slice(0)),e=e.replace(/yyyy/ig,n.Year).replace(/yyy/ig,n.Year).replace(/yy/ig,n.TYear).replace(/y/ig,n.TYear).replace(/MMM/g,i[n.Month-1]).replace(/MM/g,n.TMonth).replace(/M/g,n.Month).replace(/dd/ig,n.TDay).replace(/d/ig,n.Day).replace(/HH/g,n.THour).replace(/H/g,n.Hour).replace(/hh/g,n.Thour).replace(/h/g,n.hour).replace(/mm/g,n.TMinute).replace(/m/g,n.Minute).replace(/ss/ig,n.TSecond).replace(/s/ig,n.Second).replace(/fff/ig,n.Millisecond).replace(/ff/ig,u.toFixed(2)*100).replace(/f/ig,u.toFixed(1)*10).replace(/EEE/g,o[n.Week])):e=n.Year+"-"+n.Month+"-"+n.Day+" "+n.Hour+":"+n.Minute+":"+n.Second,e},$.mergeJsonObject=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Array.prototype.distinct=function(){var e=[],t={},n=0,r=this.length,i;for(;n<r;n++)i=this[n],t[i]!==i&&(e.push(i),t[i]=i);return e},Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var t=0,n=0;t<this.length;t++)this[t]!=this[e]&&(this[n++]=this[t]);this.length-=1},Array.prototype.getIndexByValue=function(e){var t=-1;for(var n=0;n<this.length;n++)if(this[n]==e){t=n;break}return t},$.fn.smartFloat=function(){var e=function(e){var t=e.position().top,n=e.css("position");$(window).scroll(function(){var r=$(this).scrollTop();r>t?window.XMLHttpRequest?e.css({position:"fixed",top:0}):e.css({top:r}):e.css({position:n,top:t})})};return $(this).each(function(){e($(this))})},$.fn.smartFloatIE6=function(){var e=function(e){var t=e.position().top,n=e.css("position");$(window).scroll(function(){var n=$(this).scrollTop();n>t?window.XMLHttpRequest?e.css({position:"fixed",top:0}):e.css({top:n}):e.css({position:"absolute",top:t})})};return $(this).each(function(){e($(this))})},function(e){e.subStr=function(e,t){var n=e.match(/[^\x00-\xff]|\w{1,2}/g);return n.length<=t?e:n.slice(0,t).join("")+"…"},e.navURL=function(e){if(getIEVersion()>0){var t;parent.length?t=parent.window.document:t=window.document;var n=t.createElement("a");n.href=e,t.getElementsByTagName("body")[0].appendChild(n),n.click()}else parent.length?parent.window.location=e:window.location=e},e.navURLNewWindow4A=function(e){var t=document.createElement("a");t.target="_blank",t.href=e,document.body.appendChild(t),t.click()},e.navURLNewWindow4Form=function(e){var t=guidGenerator(),n=document.createElement("form");n.id=t,n.action=e,n.method="get",n.target="_blank",document.body.appendChild(n),n.submit()},e.LockBodyScroll=function(){e("boby").attr("scroll","no")},e.UnlockBodyScroll=function(){e("boby").attr("scroll","auto")},e.LockKey=function(){return e(document).bind("contextmenu",function(){return!1}),e(document).bind("selectstart",function(){return!1}),e(document).keydown(function(){return loclkey(arguments[0])}),"OK"}}(jQuery),$.fn.DisableCtrlV=function(){$(this).keydown(function(e){return $.browser.msie?event.keyCode>47&&event.keyCode<58||event.keyCode==8?!0:!1:e.which>47&&e.which<58||e.which==8||event.keyCode==17?!0:!1}).focus(function(){this.style.imeMode="disabled"})},$.fn.OnlyNum=function(){$(this).live("keydown",function(e){if(e.ctrlKey)return!0;var t=t||window.event,n=t.charCode||t.keyCode;n!=8&&n!=9&&n!=46&&(n<37||n>40)&&(n<48||n>57)&&(n<96||n>105)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,$(this).show("highlight",150))}).live("focus",function(){this.style.imeMode="disabled"}).live("blur",function(){$(this).val($(this).val().replace(/[^\d]/g,""))}),getIEVersion()>0&&$(this).bind("beforepaste",function(e){clipboardData.setData("text",clipboardData.getData("text").replace(/[^\d]/g,""))})},$.fn.OnlyFloat=function(){$(this).live("keydown",function(e){function r(e,t){t.preventDefault?t.preventDefault():t.returnValue=!1,$(e).show("highlight",150)}if(e.ctrlKey)return!0;var t=t||window.event,n=t.charCode||t.keyCode;n==110||n==190?($(this).val().indexOf(".")>=0||!$(this).val().length)&&r(this,t):n!=8&&n!=9&&n!=46&&(n<37||n>40)&&(n<48||n>57)&&(n<96||n>105)&&r(this,t)}).live("focus",function(){this.style.imeMode="disabled"}).live("blur",function(){$(this).val($(this).val().replace(/[^\d.]/g,"").replace(/^\./g,""))}),getIEVersion()>0&&$(this).bind("beforepaste",function(e){clipboardData.setData("text",clipboardData.getData("text").replace(/(^[0-9]([.][0-9]{1,2})?$)|(^1[0-9]([.][0-9]{1,2})?$)|(^2[0-3]([.][0-9]{1,2})?$)|(^24([.]0{1,2})?$)/g,""))})},jQuery.Hashtable=function(){this.items=new Array,this.itemsCount=0,this.add=function(e,t){this.containsKey(e)?this.items[e]=t:(this.items[e]=t,this.itemsCount++)},this.get=function(e){return this.containsKey(e)?this.items[e]:null},this.remove=function(e){if(!this.containsKey(e))throw"key '"+e+"' does not exists.";delete this.items[e],this.itemsCount--},this.containsKey=function(e){return typeof this.items[e]!="undefined"},this.containsValue=function(t){for(var n in this.items)if(this.items[n]==t)return!0;return!1},this.contains=function(e){return this.containsKey(e)||this.containsValue(e)},this.clear=function(){this.items=new Array,itemsCount=0},this.size=function(){return this.itemsCount},this.length=function(){return this.itemsCount},this.isEmpty=function(){return this.size()==0}};